# medaka_rust
medakaとは自分が趣味，興味の範囲で開発している言語です． 名前の元ネタは某漫画です． なお，プログラムに関してはRuiUeyamaさんの記事やプログラムをかなり参考にしています. Rustを使っているのは，Rustの勉強がてらにしようとしているからです． この開発している言語で自分の実装したいことは，あるスコープ内での機能拡張を行えるようにすることです． 具体的に例を以下に示します．

skill all_fiction {
    extend i32 {
        fic: i32 = default,
    }

    define fiction(a: i32) {
        a.default = a.fic;
    }
}

define main(): i32 {
    dec a: i32 = 10;

    print(a); // 10

    all_fiction {
        a = a * 2 + 3;

        print(a); // 23

        fiction(a);

        print(a); // 10
    }
}
上の例のmain関数だけを見てみると， all_fictionという謎のスコープの中で変数aの値を10から23に更新していますが， その後fictionという謎の関数を実行すると，変数aの値が元の10に戻っています． これはall_fictionという名前で定義したskill(以下スキル)スコープが原因です． main関数の前にall_fictionというスキルを定義しており， スキル定義の中ではそのスキルスコープの内部でのみ使用できる関数の定義の他に， スキルスコープの内部で扱う変数を拡張し，構造体のように扱うことができます． all_fictionの中では変数型i32を拡張しているので， コンパイラはi32を struct { default: i32, fic: i32 = dafault } と扱います． その結果，上のような動作が行われたのです． 自分は，このような言語の実現を目指して開発をしています． なお，この言語ではスキルの実装が一番の目的であるため，最適化などはllvmに任せています． 進捗ですが肝心のスキルのスの字もまだ実装できていません．コードはdev branchに置いてます．
